# =============================================================================
# FILE: hvac_monitor.yaml
# VERSION: 2026.02.14.92
# =============================================================================
title: "HVAC AI Monitor"
views:
  - title: "Overview"
    path: overview
    type: masonry
    cards:
      - type: vertical-stack
        cards:
          - type: entities
            title: "Zones"
            entities:
              - entity: binary_sensor.home_occupancy
                name: "Main Home Detection"
              - entity: sensor.home_current_temperature
                name: "Main Home Temp"
              - entity: media_player.living_room_tv_2
                name: "Living Room TV"
              - type: divider
              - entity: binary_sensor.bedroom_occupancy
                name: "Bedroom Detection"
              - entity: sensor.bedroom_temperature
                name: "Bedroom Temp"

          - type: entities
            title: "Hardware: Gas Furnace"
            entities:
              - entity: input_boolean.hvac_automation_enabled
                name: "Enable Automation"
              - entity: climate.home
                name: "Main Thermostat"

          - type: entities
            title: "Hardware: Heat Pumps"
            entities:
              - entity: input_boolean.heatpump_automation_enabled
                name: "Enable Automation"
              - entity: climate.della_mini_master_bedroom
                name: "Master Bedroom"
              - entity: climate.della_living_room
                name: "Living Room (Main)"
              - entity: climate.della_main_door
                name: "Living Room (Door)"
              - entity: climate.della_mini_guest
                name: "Guest Room"

      - type: vertical-stack
        cards:
          - type: entities
            title: "Heat Pump Electrical Panel"
            entities:
              - entity: sensor.total_hvac_power
                name: "Total HVAC Power"
              - entity: sensor.heatpump_total_current
                name: "Heatpump Total Current"
              - entity: sensor.tuya_bridge_voltage
                name: "Tuya Bridge Voltage"

          - type: horizontal-stack
            cards:
              - type: gauge
                entity: sensor.total_hvac_power
                max: 3000
              - type: gauge
                entity: sensor.heatpump_total_current
                max: 15

          - type: markdown
            title: "System Action History"
            content: |
              | TIME | HARDWARE | ZONE | STATUS | TARGET | MODE |
              |:---|:---|:---|:---|:---|:---|
              {% set log = state_attr('sensor.hvac_event_log', 'table_data') %}
              {% if log %}
                {% for line in log.split('\n') %}
                  {% set p = line.split(' | ') %}
                  {% if p | length >= 6 %}
                  | {{ p[0] }} | {{ p[1] }} | {{ p[2] }} | {{ p[3] }} | {{ p[4] }} | {{ p[5] }} |
                  {% endif %}
                {% endfor %}
              {% endif %}
