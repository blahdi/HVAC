# =============================================================================
# FILE: hvac_monitor.yaml
# VERSION: 2026.02.14.53
# =============================================================================

title: "HVAC AI Monitor"
views:
  - title: "Overview"
    path: overview
    type: masonry
    cards:
      - type: vertical-stack
        cards:
          - type: entities
            title: "Climate-Automation"
            show_header_toggle: false
            entities:
              - entity: automation.hvac_pse_ai_integrated_new
                name: "Enable Climate Automation"
              - entity: binary_sensor.home_occupancy
              - entity: binary_sensor.bedroom_occupancy

          - type: entities
            title: "Gas Furnace"
            entities:
              - entity: input_boolean.hvac_automation_enabled
              - entity: climate.home

          - type: entities
            title: "Heat Pump Units"
            entities:
              - entity: binary_sensor.hvac_energy_monitor_hvac_activity_status
                name: "Compressor State"
              - entity: climate.della_living_room
              - entity: climate.della_mini_master_bedroom
              - entity: climate.della_main_door
              - entity: climate.della_mini_guest

          - type: markdown
            content: "Dashboard Version: **2026.02.14.53**"

      - type: vertical-stack
        cards:
          - type: markdown
            title: "Climate Automation History"
            content: |
              <div style="overflow-x:auto; font-family: 'Courier New', monospace; line-height: 1.4;">
              <pre>
              <b>TIME   ZONE     STATUS     TARGET  MODE</b>
              <hr style="margin: 5px 0; border-top: 1px solid #444;">
              {% set hist = state_attr('sensor.hvac_story_database', 'history') %}
              {% if hist is not none and hist is iterable %}
                {% for e in hist %}
                {{ e.time.ljust(7) }}{{ e.zone.ljust(9) }}{{ e.status.ljust(11) }}{{ e.target.ljust(8) }}{{ e.mode }}
                {% endfor %}
              {% else %}
              No history recorded. Toggle automation to begin.
              {% endif %}
              </pre>
              </div>

          - type: horizontal-stack
            cards:
              - type: gauge
                entity: sensor.total_hvac_power
                name: "Power Draw"
                max: 3000
              - type: gauge
                entity: sensor.heatpump_total_current
                name: "Amps"
                max: 15

          - type: entities
            entities:
              - entity: sensor.tuya_bridge_voltage

          - type: history-graph
            entities:
              - entity: sensor.total_hvac_power
            hours_to_show: 12
